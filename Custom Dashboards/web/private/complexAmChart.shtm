<!DOCTYPE html>
<html>
    <head>
        <title>Complex AM Chart</title>
        
        
        <!-- Page Style -->
        <style type="text/css">
        </style>
        
        <!-- Scripts from Module Directory -->
        <script type="text/javascript" src="/modules/dashboards/web/js/jquery/jquery-1.11.1.js"></script>
        <!-- Charting Library -->
        <script type="text/javascript" src="/modules/dashboards/web/js/amcharts/amcharts.js"></script>
        <script type="text/javascript" src="/modules/dashboards/web/js/amcharts/serial.js"></script>
        <!-- Mango Rest API Helper -->
        <script type="text/javascript" src="/modules/dashboards/web/js/mangoApi.js"></script>         
        <!-- Mango AM Charts Helper -->
        <script type="text/javascript" src="/modules/dashboards/web/js/mangoAmChartsApi.js"></script>         
       
        <script type="text/javascript">
        
         var chart1Xids = ["temp","volts"];
         var chart2Xids = ["temp", "volts"];
         var chart3Xids = ["temp", "volts"];
        
          var chart1 = new MangoAmChartHelper({
                  chartDivId: "chart1",
                  xids: chart1Xids,
                  numberOfSamples: 50,
                  //Operate on the PVT Object {time,value,...}
                  //this needs to return the value member or some representation of it
                  dataOperation: function(allData, pvt,xid){
                      if(xid === chart1Xids[0]){
                          return pvt.value * 0.01;
                      }else if(xid === chart1Xids[1]){
                          return pvt.value * 10;
                      }else{
                          return 0;
                      }
                  },
                  timeOperation: function(allData, pvt, xid){
                    return pvt.time;  
                  },
                  chartJson: 
                  {
                      "type": "serial",
                      //Note the path to images
                      "pathToImages": "/modules/dashboards/web/js/amcharts/images/",
                      //Set to date field in result data
                      "categoryField": "date",
                      "categoryAxis": {
                          "minPeriod": "ss",
                          "parseDates": true
                      },
                      "chartCursor": {
                          "categoryBalloonDateFormat": "JJ:NN:SS"
                      },
                      "chartScrollbar": {},
                      "trendLines": [],
                      //Note that each graph uses the valueField set to the XID of the point
                      "graphs": [
                          {
                              "bullet": "round",
                              "id": "AmGraph-1",
                              "title": chart1Xids[0],
                              "valueField": chart1Xids[0]
                          },
                          {
                              "bullet": "square",
                              "id": "AmGraph-2",
                              "title": chart1Xids[1],
                              "valueField": chart1Xids[1]
                          }
                      ],
                      "guides": [],
                      "valueAxes": [
                          {
                              "id": "ValueAxis-1",
                              "title": "Temperature"
                          }
                      ],
                      "allLabels": [],
                      "balloon": {},
                      "legend": {
                          "useGraphSettings": true
                      },
                      "titles": [
                          {
                              "id": "Title-1",
                              "size": 15,
                              "text": "Chart One"
                          }
                      ],
                  }
          });
        
          var chart2 = new MangoAmChartHelper({
              chartDivId: "chart2",
              xids: chart2Xids,
              numberOfSamples: 100,
              //No data operation defined so the data will be used as returned from the DB
              chartJson: 
              {
                  "type": "serial",
                  //Note the path to images
                  "pathToImages": "/modules/dashboards/web/js/amcharts/images/",
                  "categoryField": "date",
                  "dataDateFormat": "YYYY-MM-DD HH:NN:SS",
                  "categoryAxis": {
                      "minPeriod": "ss",
                      "parseDates": true
                  },
                  "chartCursor": {
                      "categoryBalloonDateFormat": "JJ:NN:SS"
                  },
                  "chartScrollbar": {},
                  "trendLines": [],
                  "graphs": [
                      {
                          "bullet": "round",
                          "id": "AmGraph-1",
                          lineColor: "green",
                          lineThickness: 2,
                          negativeLineColor: "black",
                          "title": chart2Xids[0],
                          "valueField": chart2Xids[0]
                      },
                      {
                          "bullet": "square",
                          "id": "AmGraph-2",
                          lineColor: "#d1655d",
                          lineThickness: 2,
                          negativeLineColor: "#637bb6",
                          "title": chart2Xids[1],
                          "valueField": chart2Xids[1]
                      }
                  ],
                  "guides": [],
                  "valueAxes": [
                      {
                          "id": "ValueAxis-1",
                          "title": "Temperature"
                      }
                  ],
                  "allLabels": [],
                  "balloon": {},
                  "legend": {
                      "useGraphSettings": true
                  },
                  "titles": [
                      {
                          "id": "Title-1",
                          "size": 15,
                          "text": "Chart Two"
                      }
                  ],
              }
      });
          
          var chart3 = new MangoAmChartHelper({
              chartDivId: "chart3",
              xids: chart3Xids,
              numberOfSamples: 500,
              //Operate on the PVT Object {time,value,...}
              //this needs to return the value member or some representation of it
              dataOperation: function(allData, pvt,xid){
                  
                  if(xid === chart3Xids[0]){
                      return pvt.value * 0.01;
                  }else if(xid === chart3Xids[1]){
                      return pvt.value * 10;
                  }else{
                      return 0;
                  }
              },
              chartJson: 
              {
                  "type": "serial",
                  "pathToImages": "/modules/dashboards/web/js/amcharts/images/",
                  "categoryField": "date",
                  "dataDateFormat": "YYYY-MM-DD HH:NN:SS",
                  "categoryAxis": {
                      "minPeriod": "ss",
                      "parseDates": true
                  },
                  "chartCursor": {
                      "categoryBalloonDateFormat": "JJ:NN:SS"
                  },
                  "chartScrollbar": {},
                  "trendLines": [],
                  "graphs": [
                      {
                          "fillAlphas": 0.7,
                          "id": "AmGraph-1",
                          lineColor: "brown",
                          lineThickness: 5,
                          negativeLineColor: "red",
                          "lineAlpha": 0,
                          "title": chart3Xids[0],
                          "valueField": chart3Xids[0]
                      },
                      {
                          "fillAlphas": 0.7,
                          "id": "AmGraph-2",
                          lineColor: "blue",
                          lineThickness: 2,
                          negativeLineColor: "orange",
                          "lineAlpha": 0,
                          "title": chart3Xids[1],
                          "valueField": chart3Xids[1]
                      }
                  ],
                  "guides": [],
                  "valueAxes": [
                      {
                          "id": "ValueAxis-1",
                          "title": "Temperature"
                      }
                  ],
                  "allLabels": [],
                  "balloon": {},
                  "legend": {},
                  "titles": [
                      {
                          "id": "Title-1",
                          "size": 15,
                          "text": "Chart 3"
                      }
                  ],
              }
      });
          
          
          
          /**
           * Run on page load
           */
          $( document ).ready(function(){
              
              chart1.createChart();
              chart2.createChart();
              chart3.createChart();
                            
          });          
        </script>
        
    </head>
<body>
	<div id="chart1" style="width:100%; height:400px; vertical-align: top;  display: inline-block; padding: 10px;">
	</div>
	<div id="chart2" style="width:100%; height:400px; vertical-align: top;  display: inline-block; padding: 10px;">
    </div>
    <div id="chart3" style="width:100%; height:400px; vertical-align: top;  display: inline-block; padding: 10px;">
    </div>
	
</body>
</html>