<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="Copyright" content="&copy;2014 Infinite Automation Systems Inc."/>
    <meta name="DESCRIPTION" content="Mango Automation from Infinite Automation Systems"/>
    <meta name="KEYWORDS" content="Mango Automation from Infinite Automation Systems"/>

    <link rel="icon" href="/2.5.0/images/favicon.ico"></link>
    
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <title>Meters</title><!--main css page that in the future will be able to change -->
    <link href="/modules/dashboards/web/private/css/college/desktop/dark.css" id="theme_css" media="all" rel="stylesheet" type="text/css">
    <!-- JQuery -->

    <script src="/modules/dashboards/web/js/jquery/jquery-1.11.1.js" type="text/javascript"></script>
    <link href="/modules/dashboards/web/js/jquery-ui/jquery.datetimepicker.css" rel="stylesheet">
    <script src="/modules/dashboards/web/js/jquery-ui/jquery.datetimepicker.js" type="text/javascript"></script>
    <!-- Charting Library -->

    <script src="/modules/dashboards/web/js/amcharts/amcharts.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/amcharts/serial.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/amcharts/pie.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/amcharts/gauge.js" type="text/javascript"></script>
    <!--     Bootstrap and others CSS -->
    <link href="/modules/dashboards/web/js/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!--     Bootstrap JS -->

    <script src="/modules/dashboards/web/js/bootstrap/js/bootstrap.js" type="text/javascript"></script>
    <link href="/modules/dashboards/web/js/bootstrap/addon/bootstrap-select/dist/css/bootstrap-select.css" rel="stylesheet" type="text/css">
    <script src="/modules/dashboards/web/js/bootstrap/addon/bootstrap-select/dist/js/bootstrap-select.min.js" type="text/javascript"></script>
    
    <!-- Mango Rest API Helper -->
    <script src="/modules/dashboards/web/js/mangoApi.js" type="text/javascript"></script>
    <!-- MangoJS -->
    <script src="/modules/dashboards/web/js/mango/dataDisplayManager.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/serialChart.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/barChart.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/statisticsBarChart.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/pieChart.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/simpleDisplay.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/realtimePointValueDataProvider.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/pointValueDataProvider.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/statisticsDataProvider.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/dataPointMatcher.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/dataPointGroup.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/pointHierarchyGrouper.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/dashboardTemplater.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/dateTimePicker.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/rollupPicker.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/timePeriodTypePicker.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/input.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/select.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/js/mango/selectPicker.js" type="text/javascript"></script>
    <!--    the custom scripts for this page -->
    <script src="/modules/dashboards/web/private/js/college/collegePointConfigurations.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/private/js/college/collegeDisplayConfigurations.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/private/js/college/collegeDataProviders.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/private/js/college/collegeLogic.js" type="text/javascript"></script>
    <script src="/modules/dashboards/web/private/js/college/kWhDailyBarChart.js" type="text/javascript"></script>
    
    <script type="text/javascript">
var groupsListsType = "select";

    $( document ).ready(function(){

      //Ensure that this active tab has a resized chart
      $.when(templater.deferred).then(function(){

      templater.invalidateChartSize(['kwhLineChartDiv'], templater);
      
      //Refresh the am chart for daily kWh
      kWhDailyBarChartDisplayManager.invalidateChartSize(['kWhDailyBarChartDiv'], kWhDailyBarChartDisplayManager);
      
      });
      
      //Hack for Bootstrap Tabs to refresh chart After Tab is shown
      //Each Link for the tab MUST Start with the prefix before the Chart's ID wihtout the Div ending.
      // ie. for the chart in 'kwhLineChartDiv' you must set the anchor's id='kwhLineChart'
      $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
      //e.target // activated tab
      //e.relatedTarget // previous tab
      if(e.target.id == 'kWhDailyBarChart'){
          kWhDailyBarChartDisplayManager.invalidateChartSize(['kWhDailyBarChartDiv'], kWhDailyBarChartDisplayManager);
      }else{
          //For all other chart Tabs
          templater.invalidateChartSize([e.target.id + 'Div'], templater);
      }
    });

    });

    </script>
    
</head>
<!-- Starting to write the UI -->
<body>
    <div class="pageHeader" id="meterName">
    </div>


    <div id="groupListDiv">
        <select class="selectpicker" data-live-search="true" id="groupsList">
            </select>
    </div>


    <div class="container-fluid" id="mainContainer">
        <!-- real time on the top left -->


        <div class="col-md-2 container-lg-height" id="topLeftCharts">

            <div id="pannelHeader" style="height:6em">
                <div class="pannelHeaderText">
                    <h2>Amps</h2>
                </div>
            </div>


            <div id="ampsBarChartDiv" style="overflow:visible !important ;width:16em; height:12em ; vertical-align: top; display: inline-block; padding: 10px;">
            </div>


            <div id="pannelHeader" style="height:6em">
                <div class="pannelHeaderText">
                    <h2>Volts</h2>
                </div>
            </div>


            <div id="voltsBarChartDiv" style="overflow:visible !important;width:16em; height:12em ; vertical-align: top; display: inline-block; padding: 10px;">

            </div>


            <div id="pannelHeader" style="height:6em">
                <div class="pannelHeaderText">
                    <h2>Kilo Watts</h2>
                </div>
            </div>


            <div id="kwBarChartDiv" style="overflow:visible !important; width:16em; height:12em ; vertical-align: top; display: inline-block; padding: 10px;">

            </div>


            <div id="pannelHeader" style="height:6em">
                <div class="pannelHeaderText">
                    <h2>Power Factor</h2>
                </div>
            </div>


            <div id="powerFactorBarChartDiv" style="overflow:visible !important;width:16em; height:12em ; vertical-align: top; display: inline-block; padding: 10px;">

            </div>
        </div>
        <!--end top left-->
        <!--    start top right -->


        <div class="col-md-10" id="topRightCharts">
            <div>
                <ul class="nav nav-tabs responsive">
                    <li class="active">
                        <a data-toggle="tab" href="#panel-kw-daily" id="kWhDailyBarChart">History</a>
                    </li>


                    <li onclick="//No resize required">
                        <a data-toggle="tab" href="#panel-stats">Statistics</a>
                    </li>
                </ul>


                <div class="tab-content responsive" id="overview-tabs">
                    <div class="tab-pane fade in active" id="panel-kw-daily">
                        <div class="divider">
                        </div>


                        <div id="pannelHeader">
                            <div class="pannelHeaderText">
                                <h2>Kilo Watts Daily</h2>
                            </div>
                        </div>


                        <div class="divider">
                        </div>
                        
                        <!--        Options  -->
                        <div class="centeredPickers" id="optionsPickers">
                            <div class="row">
                                <div class="col-sm-2">
                                    <select class="form-control" id="simpleTimePicker">
                                        </select>
                                </div>


                                <div class="col-sm-4">
                                    <input class="form-control" id="kWhFromDate" placeholder="From Date">
                                </div>


                                <div class="col-sm-4">
                                    <input class="form-control" id="kWhToDate" placeholder="To Date">
                                </div>


                                <div class="col-md-2">
                                    <select class="form-control" id="simpleTimePeriodType">
                                        </select>
                                </div>
                            </div>
                        </div>


                        <div class="amChartsTabDaily" id="kWhDailyBarChartDiv">
                        </div>
                    </div>


                    <div class="tab-pane fade" id="panel-stats">
                        <div id="pannelHeader">
                            <div class="pannelHeaderText">
                                <h2>Statistics</h2>
                            </div>
                        </div>


                        <div class="divider">
                        </div>


                        <div id="statsTableDiv">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Name</th>

                                        <th>Average</th>

                                        <th>Count</th>

                                        <th>Maximum</th>

                                        <th>Minimum</th>
                                    </tr>
                                </thead>


                                <tbody id="statisticsTableBody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!--The tabs for the charts  -->
        <div class="col-md-10" id="bottomRightCharts">
            <div id="pannelHeader">
                <div class="pannelHeaderText">
                    <h2>Meter History</h2>
                </div>
            </div>

            <div class="divider">
            </div>
            
            <!--Starting the Rollup and date and time pickers -->
            <div class="row">
                <div class="col-sm-2">
                    <select class="form-control" id="customPeriodSelect">
                        </select>
                </div>


                <div class="col-sm-2">
                    <input class="form-control" id="startDate" placeholder="To Date">
                </div>


                <div class="col-sm-2">
                    <input class="form-control" id="endDate" placeholder="To Date">
                </div>


                <div class="col-sm-2">
                    <select class="form-control" id="rollup">
                        </select>
                </div>


                <div class="col-sm-2">
                    <select class="form-control" id="timePeriodType">
                        </select>
                </div>


                <div class="col-xs-1">
                    <input class="form-control" id="timePeriod" placeholder="1" type="number" value="1">
                </div>
            </div>


            <div class="divider">
            </div>
            
            <!--      start the bottom tabs -->
            <div id="tabbable">
                <ul class="nav nav-tabs responsive">
                    <li class="active">
                        <a data-toggle="tab" href="#panel-kw" id="kwhLineChart">KW</a>
                    </li>


                    <li>
                        <a data-toggle="tab" href="#panel-amps" id="ampsLineChart">Amps</a>
                    </li>


                    <li>
                        <a data-toggle="tab" href="#panel-volts" id="voltsLineChart">Volts</a>
                    </li>


                    <li>
                        <a data-toggle="tab" href="#panel-powerFactor" id="powerFactorLineChart">Power Factor</a>
                    </li>


                    <li>
                        <a data-toggle="tab" href="#panel-phaseA" id="phaseALineChart">Phase A</a>
                    </li>


                    <li>
                        <a data-toggle="tab" href="#panel-phaseB" id="phaseBLineChart">Phase B</a>
                    </li>


                    <li>
                        <a data-toggle="tab" href="#panel-phaseC" id="phaseCLineChart">Phase C</a>
                    </li>
                </ul>


                <div class="tab-content responsive" id="chart-tabs">
                    <div class="tab-pane fade in active" id="panel-kw">
                        <div class="amChartsTab" id="kwhLineChartDiv">
                        </div>
                    </div>


                    <div class="tab-pane fade" id="panel-amps">
                        <div class="amChartsTab" id="ampsLineChartDiv">
                        </div>
                    </div>


                    <div class="tab-pane fade" id="panel-volts">
                        <div class="amChartsTab" id="voltsLineChartDiv">
                        </div>
                    </div>


                    <div class="tab-pane fade" id="panel-powerFactor">
                        <div class="amChartsTab" id="powerFactorLineChartDiv">
                        </div>
                    </div>


                    <div class="tab-pane fade" id="panel-phaseA">
                        <div class="amChartsTab" id="phaseALineChartDiv">
                        </div>
                    </div>


                    <div class="tab-pane fade" id="panel-phaseB">
                        <div class="amChartsTab" id="phaseBLineChartDiv">
                        </div>
                    </div>


                    <div class="tab-pane fade" id="panel-phaseC">
                        <div class="amChartsTab" id="phaseCLineChartDiv">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>