<!DOCTYPE html>
<html>
    <head>
        <title>Set Point Value</title>
        
        <!-- Page Style -->
        <style type="text/css">
        </style>
        
        <!-- Scripts from Module Directory -->
        <script type="text/javascript" src="/modules/dashboards/web/js/jquery/jquery-1.11.1.js"></script>
        <script type="text/javascript" src="/mango-javascript/v1/mangoApi.js"></script>         
       
        <script type="text/javascript">
          
          //Set this to the desired point XID
          var pointXid = "voltage";
          var pointType = "NUMERIC"; //Set to NUMERIC, MULTISTATE, BINARY or ALPHANUMERIC
          
          function updatePointValue(){
              
              //Create an empty point value object to send to mango after we fill it in
              var pointValue = mangoRest.pointValues.createNew();
              pointValue.dataType = pointType;
              pointValue.annotation = "Set by default dashboard";
              //pointValue.dataType = pointType; //Set the point type
              
              //Set the value depending on the data point type
              if((pointType === "MULTISTATE")||(pointType === "NUMERIC")){
                  //Since the input is text type we must convert
                  pointValue.value = new Number($('#pointValueInput').val());
              }
              else if(pointType === "BINARY"){
                  //Since the input is text type we must convert
                  pointValue.value = new Boolean();
              } 
              else{
                  //For Alphanumeric
                  pointValue.value = $('#pointValueInput').val();
              }
              
              pointValue.timestamp = new Date().getTime();
             
              
              //Using the global XID and the value from the input box set the point's value
	          mangoRest.pointValues.put(pointXid, pointValue, function(data){
	              $('#status').text('Point Value Saved');
	              }, function(jqXHR, textStatus, errorThrown, mangoMessage){
	                  $('#status').text(textStatus + " - " + mangoMessage);
	         });        
          }
          
        </script>
        
    </head>
<body>
   <div>
       <label id="pointValueLabel" class="formLabel" for="pointValue">Value:</label>
       <div id="pointValue" ><input id="pointValueInput" type="number" value="100.01"></input><button type="button" onclick="updatePointValue();">Update</button></div>
   </div>
   <div id="status"></div>
</body>
</html>