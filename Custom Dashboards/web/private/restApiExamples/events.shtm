<!DOCTYPE html>
<html>
    <head>
        <title>Current Value</title>
        <!-- Add the Mango Favicon -->
        <link rel="icon" href="/2.5.0/images/favicon.ico">
        
        <!-- Page Style -->
        <style type="text/css">
        </style>
        
        <!-- Scripts from Module Directory -->
        <script type="text/javascript" src="/modules/dashboards/web/js/config.js"></script>
        <script type="text/javascript" src="/modules/dashboards/web/js/require.js"></script>
       
        <script type="text/javascript">
                  
          $( document ).ready(function(){
        	  var query = {
        			  offset: null,
        			  limit: 100,
        			  query: [{ attribute: "alarmLevel", condition: "Int:>1"}],
        			  sort: [{ attribute: "rtnts", desc: true}],
        			  useOr: false
        			  };
        	  MangoAPI.queryEvents(query, function(results){
				  var table = $('#events');
        		  for(var i=0; i<results.length; i++){
        			  var event = results[i];
        			  var tr = $('<tr>');
        			  
        			  var td = $('<td>');
        			  td.text(event.id);
        			  tr.append(td);
        			  
        			  td = $('<td>');
        			  td.text(event.alarmLevel);
        			  tr.append(td);
        			  
        			  td = $('<td>');
        			  td.text(event.activeTimestamp);
        			  tr.append(td);
        			  
        			  td = $('<td>');
        			  td.text(event.message);
        			  tr.append(td);
        			  
        			  //add the row
        			  table.append(tr);
        		  }
	              
	              
	          }, function(jqXHR, textStatus, errorThrown, mangoMessage){
	              //alert user on fail
	              alert(errorThrown + " " + mangoMessage);
	          });
           });
        </script>
        
    </head>
<body>
    <div id="main">
           <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Level</th>
                  <th>Active Ts</th>
                  <th>Message</th>
                </tr>
              </thead>
              <tbody id="events">
              </tbody>
            </table>
    </div>
</body>
</html>