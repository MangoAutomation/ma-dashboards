<md-button class="md-fab md-fab-bottom-right" style="position:fixed !important;" ng-click="editItem($event)">
  <md-icon>add</md-icon>
</md-button>

<md-table-container>
  <table md-table>
    <thead md-head>
      <tr>
          <th md-column></th>
          <th md-column ng-if="$mdMedia('gt-sm')"></th>
          <th md-column ng-if="$mdMedia('gt-xs')">Menu text</th>
          <th md-column>State name</th>
          <th md-column ng-if="$mdMedia('gt-md')">URL</th>
          <th md-column flex></th>
        </tr>
    </thead>
    <tbody md-body>
      <tr ng-repeat-start="menuItem in storeObject.jsonData.menuItems">
          <td>
            <md-button class="md-icon-button" ng-click="menuEditor.expanded = menuItem.name" ng-show="menuItem.children && menuEditor.expanded !== menuItem.name">
              <md-icon>expand_more</md-icon>
            </md-button>
            <md-button class="md-icon-button" ng-click="menuEditor.expanded = null" ng-show="menuItem.children && menuEditor.expanded === menuItem.name">
              <md-icon>expand_less</md-icon>
            </md-button>
          </td>
          <td ng-if="$mdMedia('gt-sm')">
            <md-switch ng-model="menuItem.menuHidden" ng-true-value="" ng-false-value="true"></md-switch>
          </td>
          <td ng-if="$mdMedia('gt-xs') && menuItem.menuText" ng-bind="menuItem.menuText"></td>
          <td ng-if="$mdMedia('gt-xs') && !menuItem.menuText" ma-tr="{{menuItem.menuTr}}"></td>
          <td ng-bind="menuItem.name"></td>
          <td ng-bind="menuItem.url" ng-if="$mdMedia('gt-md')"></td>
          <td>
            <md-button class="md-icon-button" ng-click="editItem($event, menuItem, undefined, storeObject.jsonData.menuItems, $index)">
              <md-icon>edit</md-icon>
            </md-button>
            <md-button class="md-icon-button" ng-click="storeObject.jsonData.menuItems.splice($index,1)" ng-disabled="menuItem.builtIn">
              <md-icon>delete</md-icon>
            </md-button>
            <md-button class="md-icon-button" ng-click="storeObject.jsonData.menuItems.splice($index,1); storeObject.jsonData.menuItems.splice($index-1,0,menuItem)"
                ng-disabled="$first">
              <md-icon>arrow_upward</md-icon>
            </md-button>
            <md-button class="md-icon-button" ng-click="storeObject.jsonData.menuItems.splice($index,1); storeObject.jsonData.menuItems.splice($index+1,0,menuItem)"
                ng-disabled="$last">
              <md-icon>arrow_downward</md-icon>
            </md-button>
          </td>
      </tr>
      <tr ng-if="menuItem.children && menuEditor.expanded === menuItem.name" ng-repeat-end ng-repeat="child in menuItem.children" class="child-menu-item">
          <td></td>
          <td ng-if="$mdMedia('gt-sm')">
            <md-switch ng-model="child.menuHidden" ng-true-value="" ng-false-value="true"></md-switch>
          </td>
          <td ng-if="$mdMedia('gt-xs') && child.menuText" ng-bind="child.menuText"></td>
          <td ng-if="$mdMedia('gt-xs') && !child.menuText" ma-tr="{{child.menuTr}}"></td>
          <td ng-bind="child.name"></td>
          <td ng-bind="child.url" ng-if="$mdMedia('gt-md')"></td>
          <td>
            <md-button class="md-icon-button" ng-click="editItem($event, child, menuItem, menuItem.children, $index)">
              <md-icon>edit</md-icon>
            </md-button>
            <md-button class="md-icon-button" ng-click="menuItem.children.splice($index,1)" ng-disabled="child.builtIn">
              <md-icon>delete</md-icon>
            </md-button>
            <md-button class="md-icon-button" ng-click="menuItem.children.splice($index,1); menuItem.children.splice($index-1,0,child)"
                ng-disabled="$first">
              <md-icon>arrow_upward</md-icon>
            </md-button>
            <md-button class="md-icon-button" ng-click="menuItem.children.splice($index,1); menuItem.children.splice($index+1,0,child)"
                ng-disabled="$last">
              <md-icon>arrow_downward</md-icon>
            </md-button>
          </td>
      </tr>
    </tbody>
  </table>
</md-table-container>

<div class="menu-editor-buttons">
  <md-button class="md-raised md-primary md-hue-3" ng-click="saveMenu($event)"><md-icon>save</md-icon> Save</md-button>
  <md-button class="md-raised" ng-click="storeObject.$get()"><md-icon>undo</md-icon> Revert changes</md-button>
  <md-button class="md-raised md-warn" ng-click="restoreDefaultMenu($event)"><md-icon>delete</md-icon> Restore default menu</md-button>
</div>