<ma-query-builder properties="$ctrl.queryProperties" ng-model="$ctrl.query.rql" ng-change="$ctrl.doQuery()"></ma-query-builder>

<div layout="row">
  <md-input-container flex>
    <label>RQL</label>
    <input ng-model="$ctrl.query.rql" ng-model-options="{debounce: 1000}" ng-change="$ctrl.doQuery()">
  </md-input-container>
</div>

<div>
    <em>{{$ctrl.watchlistPoints.length}} points selected for watch list</em>
    <md-button class="md-icon-button" ng-click="$ctrl.watchlistPoints=[]">
      <md-icon>clear</md-icon>
    </md-button>
</div>

<md-table-container>
  <table md-table md-row-select multiple ng-model="$ctrl.watchlistPoints" md-progress="$ctrl.queryPromise">
    <thead md-head md-order="$ctrl.query.order" md-on-reorder="$ctrl.doQuery">
      <tr md-row>
          <th md-column md-order-by="name">Point name</th>
          <th md-column md-order-by="xid">XID</th>
          <th md-column md-order-by="dataSourceName">Data source</th>
          <th md-column md-order-by="deviceName">Device name</th>
        </tr>
    </thead>
    <tbody md-body>
      <tr md-row md-select="point" md-select-id="id" md-auto-select ng-repeat="point in $ctrl.allPoints track by point.id">
          <td md-cell ng-bind="point.name"></td>
          <td md-cell ng-bind="point.xid"></td>
          <td md-cell ng-bind="point.dataSourceName"></td>
          <td md-cell ng-bind="point.deviceName"></td>
      </tr>
    </tbody>
  </table>
</md-table-container>
<md-table-pagination md-limit="$ctrl.query.limit" md-limit-options="[5, 10, 20, 50, 100]" md-page="$ctrl.query.page" md-total="{{$ctrl.allPoints.$total}}" md-page-select md-on-paginate="$ctrl.doQuery"></md-table-pagination>
