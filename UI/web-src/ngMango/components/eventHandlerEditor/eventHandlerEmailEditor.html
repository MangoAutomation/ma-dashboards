<h3 ma-tr="eventHandlers.emailSettings"></h3>
<div layout layout-align="start center" layout-wrap>
    <div flex="100" flex-gt-md="33">
        <md-checkbox name="includeSystemInfo" ng-model="$ctrl.eventHandler.includeSystemInfo"><span ma-tr="eventHandlers.includeSystemInfo"></span></md-checkbox>
    </div>
    
    <div flex="100" flex-gt-md="33">
        <md-checkbox name="includeLogfile" ng-model="$ctrl.eventHandler.includeLogfile"><span ma-tr="eventHandlers.includeLogfile"></span></md-checkbox>
    </div>
    
    <md-input-container flex="100" flex-gt-md="33">
        <label ma-tr="eventHandlers.includePointValueCount"></label>
        <input name="includePointValueCount" ng-model="$ctrl.eventHandler.includePointValueCount" min="0" step="1" ma-validation-messages="$ctrl.validationMessages">
        <div ng-messages="$ctrl.form.customTemplate.$error">
            <div ng-message="required" ma-tr="ui.app.required"></div>
            <div ng-message="validationMessage" ng-bind="$ctrl.form.customTemplate.validationMessage"></div>
        </div>
    </md-input-container>
</div>

<h3 ma-tr="eventHandlers.emailRecipients"></h3>
<ma-email-recipients name="activeRecipients" ng-model="$ctrl.eventHandler.activeRecipients"></ma-email-recipients>

<h3 ma-tr="eventHandlers.escalationEmail"></h3>
<div>
    <md-checkbox name="sendEscalation" ng-model="$ctrl.eventHandler.sendEscalation"><span ma-tr="eventHandlers.escal"></span></md-checkbox>
</div>
<div ng-if="$ctrl.eventHandler.sendEscalation">
    <div>
        <md-checkbox name="repeatEscalations" ng-model="$ctrl.eventHandler.repeatEscalations"><span ma-tr="eventHandlers.repeatEscal"></span></md-checkbox>
    </div>
    
    <div layout="100" flex-gt-md="50" layout-align="start center">
        <label for="escalationDelay" ma-tr="eventHandlers.escalPeriod"></label>
        <md-input-container>
            <input name="escalationDelay" ng-model="$ctrl.eventHandler.escalationDelay" type="number" step="1">
        </md-input-container>
        <md-input-container>
            <ma-interval-type-picker name="escalationDelayType" ng-model="$ctrl.eventHandler.escalationDelayType"></ma-interval-type-picker>
        </md-input-container>
    </div>
    
    <ma-email-recipients name="escalationRecipients" ng-model="$ctrl.eventHandler.escalationRecipients"></ma-email-recipients>
</div>

<h3 ma-tr="eventHandlers.inactiveEmail"></h3>
<div>
    <md-checkbox name="sendInactive" ng-model="$ctrl.eventHandler.sendInactive"><span ma-tr="eventHandlers.inactiveNotif"></span></md-checkbox>
</div>

<div ng-if="$ctrl.eventHandler.sendInactive">
    <div>
        <md-checkbox name="inactiveOverride" ng-model="$ctrl.eventHandler.inactiveOverride"><span ma-tr="eventHandlers.inactiveOverride"></span></md-checkbox>
    </div>
</div>

<ma-email-recipients ng-if="$ctrl.eventHandler.sendInactive && $ctrl.eventHandler.inactiveOverride" name="inactiveRecipients" ng-model="$ctrl.eventHandler.inactiveRecipients"></ma-email-recipients>

<h3 ma-tr="eventHandlers.emailTemplateAndScript"></h3>
<div>
    <md-checkbox ng-model="$ctrl.customizeTemplate" ma-form-exclude ng-change="$ctrl.customizeTemplateChanged()">
        <span ma-tr="eventHandlers.customizeEmailTemplate"></span>
    </md-checkbox>
</div>

<div ng-if="$ctrl.customizeTemplate">
    <h4 ma-tr="eventHandlers.customTemplate"></h4>
    <ma-ace-editor name="customTemplate" mode="html" ng-model="$ctrl.eventHandler.customTemplate"></ma-ace-editor>
</div>
