<md-table-container flex="100" ng-if="$ctrl.contextTable.length > 0">
    <table md-table>
        <thead md-head>
            <tr md-row>
                <th md-column ma-tr="common.deviceName"></th>
                <th md-column ma-tr="common.pointName"></th>
                <th md-column ma-tr="pointEdit.template.dataType"></th>
                <th md-column ma-tr="pointEdit.text.key"></th>
                <th ng-if="$ctrl.updatesContext" md-column ma-tr="scriptingEditor.ui.updatesContext"></th>
                <th md-column></th>
            </tr>
        </thead>
        <tbody md-body>
            <tr md-row ng-repeat="item in $ctrl.contextTable">
                <td md-cell>{{ item.point.deviceName }}</td>
                <td md-cell>{{ item.point.name }}</td>
                <td md-cell>{{ item.point.pointLocator.dataType }}</td>
                <td md-cell>
                    <md-input-container flex="100">
                        <label ma-tr="pointEdit.text.key"></label>
                        <input name="variableName" ng-model="item.variableName" ng-change="$ctrl.setViewValue()" required>
                    </md-input-container>
                </td>
                <td md-cell ng-if="$ctrl.updatesContext">
                    <md-input-container flex="100" flex-gt-md="50">
                        <md-checkbox ng-model="item.contextUpdate" ng-change="$ctrl.setViewValue()"></md-checkbox>
                    </md-input-container>
                </td>
                <td md-cell>
                    <md-button class="md-icon-button" aria-label="Delete Template" ng-click="$ctrl.deleteContextPoint(item)">
                        <md-tooltip md-direction="bottom" ma-tr="excelreports.ui.deleteTemplate"></md-tooltip>
                        <md-icon>delete</md-icon>
                    </md-button>
                </td>
            </tr>
        </tbody>
    </table>
</md-table-container>

<div flex="100">
    <ma-filtering-point-list auto-init="false" label="{{'ui.script.context' | maTr}}" name="contextPoint" ng-change="$ctrl.selectContextPoint()" ng-model="$ctrl.contextPoint"></ma-filtering-point-list>
</div>
