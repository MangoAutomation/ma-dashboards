<md-card>
	<form name="$ctrl.resetForm">
    	<md-card-title>
    	  <md-card-title-text>
    	    <span class="md-headline" ma-tr="login.passwordReset"></span>
    	  </md-card-title-text>
    	</md-card-title>
    	<md-card-content layout="column">
            <md-input-container class="md-icon-float md-block">
              <label for="resetToken" ma-tr="login.resetToken"></label>
              <md-icon>code</md-icon>
              <input id="resetToken" name="resetToken" ng-model="$ctrl.resetToken" required md-no-asterisk aria-label="{{'login.resetToken'|maTr}}" ng-change="$ctrl.parseToken()">
              <div ng-messages="$ctrl.resetForm.resetToken.$error">
                <div ng-message="required" ma-tr="login.validation.noResetToken"></div>
                <div ng-message="validToken" ma-tr="login.validation.invalidResetToken"></div>
                <div ng-message="expired" ma-tr="login.validation.resetTokenExpired"></div>
              </div>
            </md-input-container>
    		<md-input-container class="md-icon-float md-block">
    	      <label for="username" ma-tr="login.userId"></label>
              <md-icon>person</md-icon>
    	      <input id="username" name="username" ng-model="$ctrl.username" type="text" disabled md-no-asterisk aria-label="{{'login.userId'|maTr}}">
    	    </md-input-container>
    	    <md-input-container class="md-icon-float md-block">
              <label for="password" ma-tr="login.newPassword"></label>
              <md-icon>vpn_key</md-icon>
    	      <input id="password" name="password" ng-model="$ctrl.newPassword" type="password" minlength="8" autofocus required md-no-asterisk aria-label="{{'login.password'|maTr}}">
    	      <div ng-messages="$ctrl.resetForm.password.$error">
    	        <div ng-message="required" ma-tr="login.validation.noPassword"></div>
                <div ng-message="minlength" ma-tr="login.validation.minLength" ma-tr-args="[8, $ctrl.resetForm.password.$viewValue.length]"></div>
    	      </div>
    	    </md-input-container>
            <div ng-show="$ctrl.newPassword">
                <md-input-container class="md-icon-float md-block">
                  <label for="confirmPassword" ma-tr="login.confirmPassword"></label>
                  <md-icon>vpn_key</md-icon>
                  <input id="confirmPassword" name="confirmPassword" ng-model="$ctrl.confirmPassword" type="password" md-no-asterisk aria-label="{{'login.confirmPassword'|maTr}}"
                        ng-pattern="$ctrl.regExpEscape($ctrl.newPassword)" ng-required="!!$ctrl.newPassword">
                  <div ng-messages="$ctrl.resetForm.confirmPassword.$error">
                    <div ng-message="required" ma-tr="login.validation.noConfirmPassword"></div>
                    <div ng-message="pattern" ma-tr="login.validation.wrongConfirmPassword"></div>
                  </div>
                </md-input-container>
            </div>
            <div ng-messages="errors" md-colors="{color: 'warn'}">
              <div ng-message="invalidLogin" ma-tr="login.validation.invalidLogin"></div>
              <div ng-message="otherError" ma-tr="login.error" ma-tr-args="[errors.otherError]"></div>
            </div>
    	</md-card-content>
    	<md-card-actions layout="row" layout-align="start center">
          <a ui-sref="login" ma-tr="login.loginPage"></a>
          <div flex></div>
          <md-button type="submit" ng-click="$ctrl.doReset()" ma-tr="login.reset" class="md-accent md-raised" aria-label="{{'login.reset'|maTr}}"></md-button>
        </md-card-actions>
    </form>
</md-card>
