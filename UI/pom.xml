<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
      <artifactId>ma-dashboards-parent</artifactId>
      <groupId>com.infiniteautomation.mango</groupId>
      <version>3.4.0-SNAPSHOT</version>
      <relativePath>../pom.xml</relativePath>
    </parent>
    <artifactId>ui</artifactId>
    <name>mangoUI</name>
    <version>3.4.0-SNAPSHOT</version>
    <description>Provides an AngularJS user interface, including the ability to create custom pages</description>
    <build>
      <plugins>
          <plugin>
              <groupId>org.codehaus.gmavenplus</groupId>
              <artifactId>gmavenplus-plugin</artifactId>
          </plugin>
          <plugin>
              <artifactId>maven-war-plugin</artifactId>
          </plugin>
          <plugin>
              <artifactId>maven-assembly-plugin</artifactId>
          </plugin>
          <plugin>
              <artifactId>maven-antrun-plugin</artifactId>
          </plugin>
          <plugin>
              <groupId>com.github.eirslett</groupId>
              <artifactId>frontend-maven-plugin</artifactId>
              <version>1.6</version> 
              <executions>
                  <execution>
                      <id>Install node and npm</id>
                      <goals>
                          <goal>install-node-and-npm</goal>
                      </goals>
                      <configuration>
                          <nodeVersion>v8.9.4</nodeVersion>
                      </configuration>
                  </execution>
                  <execution>
                      <id>Run npm install</id>
                      <goals>
                          <goal>npm</goal>
                      </goals>
                      <configuration>
                          <arguments>install</arguments>
                      </configuration>
                  </execution>
                  <execution>
                      <id>Run gulp build-docs</id>
                      <goals>
                          <goal>gulp</goal>
                      </goals>
                      <configuration>
                          <arguments>build-docs</arguments>
                          <!-- Eclipse only properties, Eclipse monitors these directories for changes -->
                          <srcdir>${project.basedir}/web/ngMango</srcdir>
                          <outputdir>${project.basedir}/docs</outputdir>
                      </configuration>
                  </execution>
                  <execution>
                      <id>Run webpack</id>
                      <goals>
                          <goal>webpack</goal>
                      </goals>
                      <configuration>
                          <arguments>--mode production --config webpack.config.js</arguments>
                      </configuration>
                  </execution>
              </executions>
          </plugin>
      </plugins>
    </build>
</project>
